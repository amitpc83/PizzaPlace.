@page "/"
@rendermode InteractiveServer
<PageTitle>Home</PageTitle>

<!--Menu-->

<PizzaList  ButtonClass="btn btn-success pl-4 pr-4"
            ButtonTitle="Order"
            Items="@State.Menu.Pizzas"
            Title="Our Selection of Pizzas"
            Selected="@AddToBasket"
    ></PizzaList>
<!--End Menu-->
<!--Shopping Basket-->

 <ShoppingBasket Orders="@State.Basket.Orders"
                 GetPizzaFromId="@State.Menu.GetPizza" 
                 Selected="@RemoveFromBasket">
</ShoppingBasket>
 <!--End Shopping Basket-->
<!--Customer Entry-->

<CustomerEntry ButtonClass="mx-auto w-25 btn btn-success" 
               ButtonTitle="Checkout" @bind-Customer="@State.Basket.Customer"
              Title="Please enter your details below" 
              ValidSubmit="PlaceOrder" ></CustomerEntry>

<!--End Customer Entry-->
@State.ToJson()

    @code {
        private State State { get; } = new State();
        private string SpicinessImage(Spiciness spiciness) => $"images/{spiciness.ToString().ToLower()}.png";
        private void AddToBasket(Pizza pizza) => State.Basket.Add(pizza.Id);
        private void RemoveFromBasket(int pos) => State.Basket.RemoveAt(pos);
        private void PlaceOrder(){
            Console.WriteLine("Placing order");
        }
        protected override void OnInitialized()
        {
            base.OnInitialized();
            State.Menu.Add(
            new Pizza(1, "Pepperoni", 8.99M, Spiciness.Spicy));
            State.Menu.Add(
            new Pizza(2, "Margarita", 7.99M, Spiciness.None));
            State.Menu.Add(
            new Pizza(3, "Diabolo", 9.99M, Spiciness.Hot));
        }
    }
